# Тестовое задание (1) &laquo;Меню ресторана&raquo; #

Написать проект на **`FastAPI`** с использованием **`PostgreSQL`** в качестве
БД. В проекте следует реализовать REST API по работе с меню ресторана, все
CRUD-операции (create/read/update/delete).

Для проверки задания прилагается Postman-коллекция с тестами. Задание выполнено,
если все тесты проходят успешно.

Даны три сущности: Меню, Подменю, Блюдо.

**Зависимости:**

- У меню есть подменю, которые к ней привязаны.
- У подменю есть блюда.

**Условия:**

- Блюдо не может быть привязано напрямую к меню, минуя подменю.
- Блюдо не может находиться в двух подменю одновременно.
- Подменю не может находиться в двух меню одновременно.
- Если удалить меню, должны удалиться все подменю и блюда этого меню.
- Если удалить подменю, должны удалиться все блюда этого подменю.
- Цены блюд выводить с округлением до двух знаков после запятой.
- Во время выдачи списка меню, для каждого меню добавлять количество подменю и
блюд в этом меню.
- Во время выдачи списка подменю, для каждого подменю добавлять количество блюд
в этом подменю.
- Во время запуска тестового сценария база данных должна быть пуста.

----

## Тестовое задание (2) Дополнения к начальному заданию ##

1. Обернуть программные компоненты в контейнеры. Контейнеры должны запускаться
по одной команде:
    ```bash
    docker-compose up -d
    ```
    или той, которая описана в **`README.md`**.    
    **Образы для `Docker`:**    
    - (API)&nbsp;&mdash; `python:3.10-slim`
    - (DB)&nbsp;&mdash; `postgres:15.1-alpine`
2. Написать CRUD-тесты для разработанного API с помощью библиотеки **`pytest`**.
3. Подготовить отдельный контейнер для запуска тестов.    
    Если **`FastAPI`** синхронное&nbsp;&mdash; тесты синхронные.    
    Если **`FastAPI`** асинхронное&nbsp;&mdash; тесты асинхронные.

----

## Тестовое задание (3) Дополнения к начальному заданию ##

1. Вынести бизнес-логику и запросы в БД в отдельные слой приложения.
2. Добавить кэш хранилище Redis.
3. Добавить pre-commit хуки в проект.
4. Описать ручки API в соответствии с OpenAPI.

**Требования**

- Код должен проходить все линтеры.
- Код должен соответствовать принципам SOLID, DRY, KISS.
- Проект должен запускаться по одной команде.
- Проект должен проходить все Postman-тесты (коллекция с начального задания).
- Дополнительно написанные тесты (Вэбинар-2) должны быть актуальны, запускаться
и успешно проходить.

**Дополнительно**

- Проект запускается по одной команде.
- Тесты запускаются по другой.

----

## Тестовое задание (4) Дополнения к начальному заданию ##

1. Переписать текущее FastAPI-приложение на асинхронное выполнение.
2. Добавить в проект фоновую задачу с помощью `Celery` + `RabbitMQ`.
3. Отдельный ендпоинт, который заполнит базу тестовыми данными, для последующей
генерации меню в Excel-файл.

**Требования**

- Данные меню, подменю, блюд для генерации Excel-файла должны доставаться одним
ORM-запросом в БД (использовать подзапросы и агрегирующие функции SQL).
- Код должен проходить все линтеры (`black`, `autopep`, `flake8`, `mypy`,
`isort`).
- Проект должен соответствовать всем предыдущим требованиям.

----
